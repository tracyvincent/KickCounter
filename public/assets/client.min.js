var app=angular.module("kickApp",["ngRoute"]);app.filter("secondsToTime",function(){function a(a){return a<10?"0"+a:a}return function(b){if("number"!=typeof b||b<0)return"00:00:00";var c=Math.floor(b/3600),d=Math.floor(b%3600/60),e=Math.floor(b%60);return a(c)+":"+a(d)+":"+a(e)}}),angular.module("kickApp").config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"/views/login.html",controller:"LoginController",controllerAs:"login"}).when("/register",{templateUrl:"/views/register.html",controller:"RegisterController",controllerAs:"register"}).when("/dashboard",{templateUrl:"views/dashboard.html",controller:"DashboardController",controllerAs:"dash"}).when("/game",{templateUrl:"views/game.html",controller:"GameController",controllerAs:"game"}).when("/continueGame",{templateUrl:"views/continueGame.html",controller:"ContinueController",controllerAs:"continue"}).when("/kickReport",{templateUrl:"views/kickReport.html",controller:"ReportController",controllerAs:"report"}),b.html5Mode(!0)}]),app.controller("MainController",["$http","DataService",function(a,b){}]),app.controller("LoginController",["$http","$location",function(a,b){function c(a){console.log("Success",a),b.path("/dashboard")}function d(a){console.log("Failure",a)}var e=this;e.username="",e.password="",e.login=function(){console.log("Username",e.username),console.log("Password",e.password);var b={};b.username=e.username,b.password=e.password,console.log(b),a.post("/login",b).then(c,d)}}]),app.controller("RegisterController",["$http","$location",function(a,b){var c=this;c.show=!1,c.username="",c.password="",c.password2="",c.register=function(){function d(a){console.log("Success",a),b.path("/dashboard")}function e(a){console.log("Failure",a),b.path("/failure")}if(console.log("Username",c.username),console.log("Password",c.password),console.log("Password2",c.password2),c.password!=c.password2)return void(c.show=!0);var f={};f.username=c.username,f.password=c.password,console.log(f),a.post("/register",f).then(d,e)}}]),app.controller("DashboardController",["$http","$location","DataService",function(a,b,c){var d=this;d.untimedGames=[],d.timedGames={},c.loadTimed(),untimedSuccess=function(a){console.log("untimed load success",a.data),d.untimedGames=a.data},untimedFail=function(a){console.log("untimed load fail",a)},d.loadUntimed=function(){a.get("/dashboard/untimed").then(untimedSuccess,untimedFail)},d.loadUntimed(),timedSuccess=function(a){console.log("timed load success",a),d.timedGames=a.data},timedFail=function(a){console.log("timed load fail",a)},d.loadTimed=function(){a.get("/dashboard/timed").then(timedSuccess,timedFail)},d.loadTimed(),deleteUntimedSuccess=function(a){console.log("delete untimed success"),d.loadUntimed()},deleteUntimedFail=function(a){console.log("delete untimed fail")},d.deleteUntimedGame=function(b){a.delete("/dashboard/deleteUntimed/"+b).then(deleteUntimedSuccess,deleteUntimedFail)},deleteTimedSuccess=function(a){console.log("delete timed success"),d.loadTimed()},deleteTimedFail=function(a){console.log("delete timed fail")},d.deleteTimedGame=function(b){a.delete("/dashboard/deleteTimed/"+b).then(deleteTimedSuccess,deleteTimedFail)},d.continueGame=function(a){c.setContinueGame(a)}}]),app.controller("GameController",["$http","$location","$interval",function(a,b,c,d){function e(){f.seconds++}var f=this;f.gameInit=function(){f.timer=null,f.timeDisplay=!1,f.gameSettings={},f.gameForm=!0,f.gameTitle=!1,f.gameData={},f.gameData.totalScore=0,f.gameData.winner={name:"",score:0},f.saveGameSet=!1,f.seconds=0,f.timeButtons=!1,f.gameStart=null,f.startNew=!1,f.players=[],f.scoreButton=!1},f.gameInit(),f.start=function(){f.saveGameSet=!1,f.scoreButton=!0,f.timer||(f.timer=c(e,1e3)),null==f.gameStart&&(f.gameStart=new Date)},f.stop=function(){f.saveGameSet=!0,f.scoreButton=!1,f.timer&&(c.cancel(f.timer),f.timer=null)},f.activatePlayers=function(a){for(var b=1,c=1;c<=a;c++)f.players.push({name:"Name Player"+b,score:0}),b++;console.log(f.players)},f.saveGameSettings=function(){f.gameForm=!1,f.gameTitle=!0,f.activatePlayers(f.gameSettings.numPlayers),"false"==f.gameSettings.timed?(f.saveGameSet=!0,f.scoreButton=!0,f.gameStart=new Date):(f.timeDisplay=!0,f.timeButtons=!0,console.log(f.gameSettings))},f.startNewGame=function(){f.gameInit()},f.scorePoint=function(a){console.log(a);for(var b=0;b<f.players.length;b++)f.players[b].name==a&&f.players[b].score++},handleSuccess=function(){console.log("game saved")},handleFailure=function(){console.log("failed saving game")},f.saveGameData=function(){for(var b=0;b<f.players.length;b++)f.gameData.totalScore+=f.players[b].score;for(var b=0;b<f.players.length;b++)f.players[b].score>f.gameData.winner.score?f.gameData.winner=f.players[b]:f.players[b].score==f.gameData.winner.score&&(f.gameData.winner.name=f.gameData.winner.name+", and "+f.players[b].name);f.gameData.gameDuration=f.seconds,f.gameData.gameName=f.gameSettings.name,f.gameData.gameStart=f.gameStart,f.gameData.players=f.players,f.saveGameSet=!1,f.timeButtons=!1,f.scoreButton=!1,console.log(f.gameData),a.post("/game",f.gameData).then(handleSuccess,handleFailure),f.startNew=!0},f.deleteGame=function(){f.gameInit()}}]),app.controller("ContinueController",["$http","$location","DataService",function(a,b,c){var d=this;d.gameSettings={},d.pageLoad=function(){d.gameSettings=c.getDataServiceGame(),console.log("continue controller",d.gameSettings)},d.scorePoint=function(a){console.log(a),d.gameSettings.totalScore++;for(var b=0;b<d.gameSettings.players.length;b++)d.gameSettings.players[b].name==a&&d.gameSettings.players[b].score++},d.handleSuccess=function(a){console.log("saved successfullly",a)},d.handleFailure=function(a){console.log("save fail",a)},d.saveGameUpdates=function(){for(var b=0;b<d.gameSettings.players.length;b++)d.gameSettings.players[b].score>d.gameSettings.winner.score?d.gameSettings.winner=d.gameSettings.players[b]:d.gameSettings.players[b].score==d.gameSettings.winner.score&&(d.gameSettings.winner.name=d.gameSettings.winner.name+", and "+d.gameSettings.players[b].name);console.log(d.gameSettings),a.put("/update/"+d.gameSettings._id,d.gameSettings).then(d.handleSuccess,d.handleFailure)}}]),app.factory("DataService",["$http",function(a){function b(a){c=a,console.log("DataService",c)}var c={},d={};return timedSuccess=function(a){console.log("timed load success",a),d=a.data},timedFail=function(a){console.log("timed load fail",a)},loadTimed=function(){a.get("/dashboard/timed").then(timedSuccess,timedFail)},{getDataServiceGame:function(){return c},setContinueGame:b,loadTimed:loadTimed,getTimedGames:function(){return d}}}]),app.controller("ReportController",["$http","$location","DataService",function(a,b,c){var d=this;d.timedGames=c.getTimedGames(),console.log(d.timedGames),d.print=function(){window.print()}}]);